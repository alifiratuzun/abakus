{% extends "layout.njk" %}

{% block content %}
  <article class="project">
    {% block projectmeta %}
      <div class="project-meta">
        <h1>{{ title }}</h1>
        <div class="project-meta-info aligned-meta">
          {% if mimar %}<div class="project-meta-row"><span class="meta-label">Mimar:</span> <span class="meta-value">{{ mimar }}</span></div>{% endif %}
          {% if yer %}<div class="project-meta-row"><span class="meta-label">Yer:</span> <span class="meta-value">{{ yer }}</span></div>{% endif %}
          {% if tur %}<div class="project-meta-row"><span class="meta-label">TÃ¼r:</span> <span class="meta-value">{{ tur }}</span></div>{% endif %}
          {% if tarih %}<div class="project-meta-row"><span class="meta-label">Tarih:</span> <span class="meta-value">{{ tarih }}</span></div>{% endif %}
        </div>
      </div>
    {% endblock %}
    {% set heroImage = cover_image or (images and images[0]) %}
    {% set hasBlocks = content_blocks and content_blocks.length > 0 %}
    <div class="project-main project-main-centered">
      {% if heroImage %}
        <figure class="project-hero">
          <img src="{{ heroImage.image }}" alt="{{ heroImage.alt | default(title) }}">
          {% if heroImage.alt %}
            <figcaption class="image-alt-text">{{ heroImage.alt }}</figcaption>
          {% endif %}
        </figure>
      {% endif %}

      {% if hasBlocks %}
        {% for block in content_blocks %}
          {% if block.type == "text" and block.body %}
            <div class="project-block project-block-text">
              {{ block.body | safe }}
            </div>
          {% elif block.type == "image" and block.image %}
            <figure class="project-block project-block-image">
              <img src="{{ block.image }}" alt="{{ block.alt | default(title) }}">
              {% if block.caption or block.alt %}
                <figcaption class="image-alt-text">{{ block.caption or block.alt }}</figcaption>
              {% endif %}
            </figure>
          {% endif %}
        {% endfor %}
      {% else %}
        {% if images %}
          {% for img in images %}
            <img src="{{ img.image }}" alt="{{ img.alt | default(title) }}">
            {% if img.alt %}
              <div class="image-alt-text">{{ img.alt }}</div>
            {% endif %}
          {% endfor %}
        {% elseif heroImage %}
          <img src="{{ heroImage.image }}" alt="{{ heroImage.alt | default(title) }}">
          {% if heroImage.alt %}
            <div class="image-alt-text">{{ heroImage.alt }}</div>
          {% endif %}
        {% endif %}
        <div class="body">
          {{ content | safe }}
        </div>
      {% endif %}
    </div>
  </article>
  {% if footnote %}
    <div class="project-footnote">{{ footnote | safe }}</div>
  {% endif %}
{% endblock %}
